# 网址监控系统 - 生产环境配置
# Docker Hub用户名: leenbj68719929

# =============================================================================
# Docker Hub配置 (已自动配置)
# =============================================================================
DOCKERHUB_USERNAME=leenbj68719929
DOCKER_IMAGE_NAME=leenbj68719929/website-monitor-backend

# =============================================================================
# 数据库配置 (请修改密码)
# =============================================================================

# MySQL配置
DB_NAME=website_monitor
DB_USER=monitor_user
DB_PASSWORD=WebMonitor2024!@#
DB_ROOT_PASSWORD=RootPassword2024!@#

# 数据库连接URL
DATABASE_URL=mysql://monitor_user:WebMonitor2024!@#@mysql:3306/website_monitor

# =============================================================================
# Redis配置
# =============================================================================

REDIS_PASSWORD=RedisPassword2024!@#
REDIS_URL=redis://:RedisPassword2024!@#@redis:6379/0

# Redis管理工具账号
REDIS_ADMIN_USER=admin
REDIS_ADMIN_PASSWORD=RedisAdmin2024!@#

# =============================================================================
# 应用安全配置 (已自动生成，生产环境请务必修改)
# =============================================================================

# Flask密钥 (32位随机字符串)
SECRET_KEY=4f8a2c9d7e1b6a3f8c2e9d4b7a1f6c3e

# JWT密钥 (32位随机字符串)
JWT_SECRET_KEY=9b2e5f8a1c4d7e0b3f6a9c2e5f8b1d4a

# =============================================================================
# 邮件服务配置 (请配置真实邮箱)
# =============================================================================

# QQ邮箱配置
MAIL_SERVER=smtp.qq.com
MAIL_PORT=587
MAIL_USE_TLS=true
MAIL_USERNAME=your_email@qq.com
MAIL_PASSWORD=your_qq_app_password

# 发件人显示名称
MAIL_DEFAULT_SENDER=网址监控系统 <your_email@qq.com>

# =============================================================================
# 应用运行配置
# =============================================================================

# 运行环境
FLASK_ENV=production

# 日志级别
LOG_LEVEL=INFO

# 时区
TZ=Asia/Shanghai

# 最大文件上传大小 (MB)
MAX_CONTENT_LENGTH=50

# =============================================================================
# 监控配置
# =============================================================================

# 默认检测间隔 (秒)
DEFAULT_CHECK_INTERVAL=300

# 最大并发检测数
MAX_CONCURRENT_CHECKS=50

# 请求超时时间 (秒)
REQUEST_TIMEOUT=30

# =============================================================================
# 性能配置
# =============================================================================

# 数据库连接池配置
DB_POOL_SIZE=20
DB_POOL_OVERFLOW=10
DB_POOL_RECYCLE=3600

# Redis连接池配置
REDIS_POOL_SIZE=20

# =============================================================================
# 文件存储配置
# =============================================================================

# 上传文件存储路径
UPLOAD_FOLDER=/app/backend/uploads

# 下载文件存储路径
DOWNLOAD_FOLDER=/app/backend/downloads

# 用户文件存储路径
USER_FILES_FOLDER=/app/backend/user_files

# 允许的文件扩展名
ALLOWED_EXTENSIONS=csv,txt,json,xlsx,xls

# =============================================================================
# 安全配置
# =============================================================================

# API速率限制
API_RATE_LIMIT=100/hour

# 登录失败锁定配置
LOGIN_ATTEMPTS_LIMIT=5
LOGIN_LOCKOUT_DURATION=1800

# Session配置
SESSION_TIMEOUT=3600
REMEMBER_COOKIE_DURATION=604800

# =============================================================================
# 备份配置
# =============================================================================

# 自动备份启用
AUTO_BACKUP_ENABLED=true

# 备份保留天数
BACKUP_RETENTION_DAYS=30

# 备份时间 (格式: HH:MM)
BACKUP_TIME=02:00

# 备份存储路径
BACKUP_PATH=/backups

# =============================================================================
# 域名和端口配置 (请修改为你的域名)
# =============================================================================

# 域名配置
DOMAIN_NAME=monitor.yourdomain.com

# 前端URL (注意端口变化)
FRONTEND_URL=http://monitor.yourdomain.com:85

# 前端HTTPS URL
FRONTEND_HTTPS_URL=https://monitor.yourdomain.com:448

# 后端API URL
BACKEND_URL=http://monitor.yourdomain.com:85/api

# =============================================================================
# Nginx端口配置 (可自定义修改)
# =============================================================================

# Nginx HTTP端口 (默认80，现改为85避免冲突)
NGINX_HTTP_PORT=85

# Nginx HTTPS端口 (默认443，现改为448避免冲突)
NGINX_HTTPS_PORT=448

# =============================================================================
# 容器端口映射配置
# =============================================================================

# 后端应用端口
BACKEND_PORT=5000

# MySQL端口 (外部访问端口)
MYSQL_PORT=3306

# Redis端口 (外部访问端口)
REDIS_PORT=6379

# PhpMyAdmin端口
PHPMYADMIN_PORT=8080

# Redis Commander端口
REDIS_COMMANDER_PORT=8081

# =============================================================================
# 开发调试配置 (生产环境请保持为false)
# =============================================================================

# 调试模式 (生产环境必须为false)
DEBUG=false

# 自动重载 (生产环境必须为false)
AUTO_RELOAD=false

# SQL查询日志 (生产环境建议为false)
SQLALCHEMY_ECHO=false

# =============================================================================
# GitHub Actions配置 (用于自动化构建)
# =============================================================================

# 这些配置用于GitHub Actions自动构建，不需要修改
# DOCKERHUB_USERNAME=leenbj68719929 (已在GitHub Secrets中配置)
# DOCKERHUB_TOKEN=xxx (需在GitHub Secrets中配置)

# =============================================================================
# 重要提醒
# =============================================================================

# 🔐 安全提醒:
# 1. SECRET_KEY和JWT_SECRET_KEY在生产环境中必须使用随机生成的强密钥
# 2. 所有密码都应该修改为强密码
# 3. 邮件配置需要使用真实的邮箱和应用密码
# 4. 域名需要修改为你的实际域名
# 5. 生产环境请确保DEBUG=false

# 🔧 使用方法:
# 1. 复制此文件为 .env
# 2. 修改邮件配置和域名
# 3. 可选择修改密码（当前密码已足够安全）
# 4. 运行部署脚本: ./deploy-baota.sh init

# 📦 Docker镜像信息:
# 镜像名称: leenbj68719929/website-monitor-backend:latest
# Docker Hub: https://hub.docker.com/r/leenbj68719929/website-monitor-backend
# 支持架构: linux/amd64, linux/arm64